<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Wayverb: Wayverb</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Wayverb
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Wayverb </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>Hybrid waveguide and ray-tracing room acoustic simulator with GPU acceleration.</b></p>
<div class="image">
<img src="docs_source/images/wayverb_ui.png" />
</div>
<h1>Synopsis</h1>
<p>This project contains a library for offline room-acoustics simulations, along with a graphical app which can be used to set-up and run these simulations. The app produces room impulse responses, which can be used with convolution reverbs to create realistic auralisations of virtual spaces. Simulated room impulse responses may be particularly useful for architects, sound-designers, and musicians.</p>
<p>There are several common methods for simulating room acoustics, which can largely be subdivided into two main categories:</p>
<ul>
<li><b>Geometric methods</b> are fast but inaccurate, especially at low frequencies.</li>
<li><b>Wave-modelling methods</b> are much more accurate, but time-consuming to compute, especially at high frequencies.</li>
</ul>
<p>As the strengths and weaknesses of the two methods balance one-another out, it makes sense to combine both methods, so that wave-modelling is used to simulate low-frequency output, and geometric methods are used to generate high-frequency content.</p>
<p>The approach of this library is to use:</p>
<ul>
<li><b>image-source</b> (a geometric method) for high-frequency early reflections,</li>
<li><b>stochastic ray-tracing</b> (another geometric method) for high-frequency late reflections, and</li>
<li><b>rectilinear waveguide mesh</b> (a wave-based method) for all low-frequency content.</li>
</ul>
<h1>Usage Notes</h1>
<p>You'll need a 3D model of the space. This model <em>must</em> be solid and watertight, without holes or no-thickness planes. When the simulation is run, the waveguide mesh setup process will attempt to work out whether each node is inside or outside the space, and it will not be able to do so if the model does not have a well-defined inside and outside.</p>
<p>To ensure that your model is valid, you can:</p>
<ol type="1">
<li>Open the model in Sketchup.</li>
<li>Select-all and Edit &gt; Make Group.</li>
<li>Check the info window (Window &gt; Entity Info).</li>
<li>If this window displays a volume, it is correct.</li>
</ol>
<p>If the model is not valid, you can debug it using the <a href="https://extensions.sketchup.com/en/content/solid-inspector">'Solid Inspector' plugin</a>.</p>
<p>These instructions are taken from the readme for <a href="https://github.com/juuli/ParallelFDTD">ParallelFDTD</a>, which uses a similar (but not idential) technique to Wayverb for setting up a waveguide mesh.</p>
<p>Wayverb interprets the units used in the model file as metres. Some exporters (like the Sketchup <code>.dxf</code> exporter) silently change the scale of the model during export. For best results, it is recommended to export to <code>.obj</code> wherever possible. The following dialog shows optimum settings for the Sketchup Object exporter.</p>
<div class="image">
<img src="docs_source/images/export_options.png" />
</div>
<h1>Requirements</h1>
<h2>Running</h2>
<p>To run the program you will need:</p>
<ul>
<li>Mac OS 10.10 or newer</li>
<li>GPU with double-precision support</li>
</ul>
<p>While this project <em>might</em> work on a mac with integrated graphics, ideally you should use a recent mac with a discrete graphics card. You could be waiting a long time otherwise!</p>
<p>This project has been developed and tested on Mac OS 10.11.6, on a Mac with an AMD GPU. It doesn't have any known bugs on this platform.</p>
<p>Some testing has been carried out on Mac OS 10.10, using an Nvidia GPU. On this platform there were reasonably consistent crashes within OpenCL framework code. These crashes are difficult to track down and have not been fixed, as the author has been unable to secure extended access to a machine with this Nvidia/10.10 configuration.</p>
<p>Some bugs are to be expected: if you find a bug, please file it using the issues tab on the Github repository.</p>
<h2>Building</h2>
<p>You will need:</p>
<ul>
<li>Mac OS 10.10 or newer</li>
<li>Really recent Clang with C++14 support and experimental C++17 headers (development used Apple LLVM 8)</li>
<li>CMake</li>
</ul>
<p>Open <code>wayverb/Builds/MacOS/wayverb.xcodeproj</code> and build from there. All dependencies should get downloaded and built automatically. <b>The initial build will be really slow</b>, due to downloading and compiling a lot of libraries. This is normal.</p>
<p>Unfortunately, some of the dependencies have their own dependencies. If building fails, you may also need to install the following:</p>
<ul>
<li>autoconf</li>
<li>autogen</li>
<li>automake</li>
<li>libtool</li>
<li>pkg-config</li>
</ul>
<p>If you have <a href="http://brew.sh">Homebrew</a> installed, then you can grab everything you might need by running this command: </p><pre class="fragment">brew install cmake autoconf autogen automake libtool pkg-config
</pre><h1>Project Structure</h1>
<h2>Important Folders</h2>
<ul>
<li><b>src</b>: all the library code for the project. This is further subdivided:<ul>
<li><b>core</b>: generic utilities such as data structures, architectural patterns and DSP helpers</li>
<li><b>raytracer</b>: components which relate specifically to geometric acoustics</li>
<li><b>waveguide</b>: components which relate specifically to finite-difference time-domain (FDTD) air pressure simulation</li>
<li><b>combined</b>: one way of combining the ray-tracer and waveguide components for broadband room acoustics simulations</li>
<li><b>audio_file</b>: wrapper round libsndfile. If I ever switch the soundfile library from libsndfile (to something with a more flexible license) then this module is all that will have to change.</li>
<li><b>frequency_domain</b>: wrapper around fftw. If I ever switch to some other library, this is the only code that will have to change. There are also a few utilities to do with analysis and filtering here.</li>
<li><b>hrtf</b>: small utility for generating hrtf data files from audio inputs.</li>
<li><b>utilities</b>: small self-contained utilities which aren't really tied to this project, but they have to live somewhere.</li>
</ul>
</li>
<li><b>wayverb</b>: a GUI app interface to the <code>combined</code> library written with JUCE</li>
<li><b>bin</b>: a collection of small command-line programs primarily for testing outputs from the library components</li>
<li><b>docs_source</b>: the source-code for the accompanying documentation. This gets built into the contents of...</li>
<li><b>docs</b>: automatically-generated documentation, visible at <a href="https://reuk.github.io/wayverb/">the Wayverb site</a>.</li>
</ul>
<h2>Other Folders</h2>
<ul>
<li><b>scripts</b>: a 'scratchpad' folder for python and octave prototypes</li>
<li><b>demo</b>: assets for testing purposes</li>
<li><b>config</b>: these files configure the documentation generator. They used to configure the Travis CI process which automatically built and published the library documentation.</li>
</ul>
<h1>License</h1>
<p>Please see the <code>LICENSE</code> file for details.</p>
<p><b>Software is provided "as is", without warranty of any kind, express or implied, including but not limited to the warranties of merchantability, fitness for a particular purpose and noninfringement. In no event shall the authors or copyright holders be liable for any claim, damages or other libility, whether in an action of contract, tort or otherwise, arising from, out of or in connection with the software or the use or other dealings in the software.</b> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
